{"version":3,"file":"assets/js/475.0dc931f8.js","mappings":"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","sources":["webpack://work/./src/components/user/Order.vue?5245","webpack://work/src/components/user/Order.vue","webpack://work/./src/components/user/Order.vue?70d8","webpack://work/./src/components/user/Order.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"back\"},[_c('div',{staticClass:\"info\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"校车信息\")]),_c('el-breadcrumb-item',[_vm._v(\"我的预约\")])],1)],1),_c('div',{staticClass:\"search\"},[_c('el-date-picker',{staticClass:\"date\",attrs:{\"type\":\"date\",\"placeholder\":\"开始日期\"},model:{value:(_vm.start),callback:function ($$v) {_vm.start=$$v},expression:\"start\"}}),_c('span',[_vm._v(\"到\")]),_c('el-date-picker',{staticClass:\"date\",attrs:{\"type\":\"date\",\"placeholder\":\"结束日期\"},model:{value:(_vm.end),callback:function ($$v) {_vm.end=$$v},expression:\"end\"}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"size\":\"medium\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索预约\")])],1),_vm._l((_vm.orders),function(order){return _c('div',{key:order.id,staticClass:\"my-order\"},[_c('div',{staticClass:\"my-order-info clearfix\"},[_c('div',[_c('span',[_vm._v(\"班次id:\"+_vm._s(order.id))]),_c('span',[_vm._v(\"发车时间:\"+_vm._s(order.time))])]),_c('div',[_c('span',[_vm._v(\"班次状态:\"+_vm._s(order.status))]),_c('span',{staticClass:\"el-icon-delete-solid btn\",on:{\"click\":function($event){return _vm.cancel(order.id)}}},[_vm._v(\"取消预约\")])])]),_c('div',{staticClass:\"my-order-description\"},[_c('span',[_vm._v(_vm._s(order.start))]),_c('span',[_vm._v(\"至\")]),_c('span',[_vm._v(_vm._s(order.end))])])])}),_c('div',[_c('el-pagination',{staticClass:\"page\",attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.totalPages,\"current-page\":_vm.currentPage},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"current-change\":_vm.getPageNum}})],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"back\">\r\n        <div class=\"info\">\r\n            <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n                <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n                <el-breadcrumb-item>校车信息</el-breadcrumb-item>\r\n                <el-breadcrumb-item>我的预约</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"search\">\r\n            <el-date-picker class=\"date\" v-model=\"start\" type=\"date\" placeholder=\"开始日期\"></el-date-picker>\r\n            <span>到</span>\r\n            <el-date-picker class=\"date\" v-model=\"end\" type=\"date\" placeholder=\"结束日期\"></el-date-picker>\r\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"medium\" @click=\"search\">搜索预约</el-button>\r\n        </div>\r\n        <div class=\"my-order\" v-for=\"order in orders\" :key=\"order.id\">\r\n            <div class=\"my-order-info clearfix\">\r\n                <div>\r\n                    <span>班次id:{{order.id}}</span>\r\n                    <span>发车时间:{{order.time}}</span>\r\n                </div>\r\n                <div>\r\n                    <span>班次状态:{{order.status}}</span>\r\n                    <span class=\"el-icon-delete-solid btn\" @click=\"cancel(order.id)\">取消预约</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"my-order-description\">\r\n                <span>{{order.start}}</span>\r\n                <span>至</span>\r\n                <span>{{order.end}}</span>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <el-pagination class=\"page\" background layout=\"prev, pager, next\" :total=\"totalPages\" :current-page.sync=\"currentPage\" @current-change=\"getPageNum\">\r\n            </el-pagination>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            start:'',\r\n            end:'',\r\n            saveStart:'',\r\n            saveEnd:'',\r\n            totalPages:100,\r\n            currentPage:1,\r\n            orders:[\r\n            ]\r\n        }\r\n    },\r\n    methods:{\r\n        goto(path){\r\n            this.$router.push({\r\n                path:path\r\n            })\r\n        },\r\n        getDate(value){\r\n            if(value==='')return '';\r\n            let time = new Date(value);\r\n            return time.getFullYear()+'/'+(time.getMonth()+1)+'/'+time.getDate();\r\n        },\r\n        getPageNum(value){\r\n            this.getPage(this.currentPage);\r\n        },\r\n        search(){\r\n            this.saveStart = this.start;\r\n            this.saveEnd = this.end;\r\n            this.getPage(1);\r\n        },\r\n        cancel(id){\r\n            this.$axios({\r\n                method:'POST',\r\n                url:'/user/cancel',\r\n                data:{\r\n                    id:id,\r\n                    page:this.currentPage,\r\n                    number:4,\r\n                    startTime:this.getDate(this.saveStart),\r\n                    endTime:this.getDate(this.saveEnd)\r\n                }\r\n            }).then(res=>{\r\n                if(res.data.status==1){\r\n                    this.$message({\r\n                        message:\"取消成功,取消的校车班次id为\"+id,\r\n                        type:'success'\r\n                    });\r\n                    this.orders = res.data.orders;\r\n                    console.log(res.data.orders);\r\n                    this.totalPages = res.data.pages*10;\r\n                    this.currentPage = res.data.currentPage;\r\n                }else if(res.data.status==0){\r\n                    this.$message({\r\n                        message:'取消失败,该预约已过期!',\r\n                        type:'warning'\r\n                    })\r\n                }else{\r\n                    this.$store.state.status = 1;\r\n                    this.$store.state.hasLogin = false;\r\n                    this.$store.state.isManager = false;\r\n                    this.$store.state.userName = '';\r\n                    this.$store.state.email = '';\r\n                    this.$store.state.userId = '';\r\n                    localStorage.clear();\r\n                    this.goto('/');\r\n                }\r\n            })\r\n        },\r\n        getPage(currentPage){\r\n            this.$axios({\r\n                method:'GET',\r\n                url:'/user/searchOrders',\r\n                params:{\r\n                    page:currentPage,\r\n                    number:4,\r\n                    startTime:this.getDate(this.saveStart),\r\n                    endTime:this.getDate(this.saveEnd)\r\n                }\r\n            }).then(res=>{\r\n                if(res.data.status==1){\r\n                    this.orders = res.data.orders;\r\n                    this.totalPages = res.data.pages*10;\r\n                    this.currentPage = res.data.currentPage;\r\n                }else if(res.data.status==0){\r\n                    this.$message({\r\n                        message:'日期输入有误!',\r\n                        type:'warning'\r\n                    })\r\n                }else{\r\n                    this.$store.state.status = 1;\r\n                    this.$store.state.hasLogin = false;\r\n                    this.$store.state.isManager = false;\r\n                    this.$store.state.userName = '';\r\n                    this.$store.state.email = '';\r\n                    this.$store.state.userId = '';\r\n                    localStorage.clear();\r\n                    this.goto('/');\r\n                }\r\n            })\r\n        }\r\n    },\r\n    mounted(){\r\n        this.getPage(this.currentPage);\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.back{\r\n    width: 100%;\r\n    margin:0 auto;\r\n}\r\n.info{\r\n    margin-top:10px;\r\n    margin-bottom: 10px;\r\n    padding-left: 10px;\r\n}\r\n.search{\r\n    margin-top: 20px;\r\n    margin-bottom: 10px;\r\n}\r\n.search>.date:first-child{\r\n    margin-left: 170px;\r\n}\r\n.search > .el-button{\r\n    margin-left: 40px;\r\n}\r\n.search > span{\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n}\r\n.date{\r\n    width: 150px !important;\r\n}\r\n/* 订单样式 */\r\n.my-order{\r\n    border: 1px #DCDFE6 solid;\r\n    width: 90%;\r\n    height: 120px;\r\n    margin-left: 5%;\r\n    margin-bottom: 20px;\r\n    border-radius: 10px 10px 10px 10px;\r\n    background-color: #FFFFFF;\r\n}\r\n.my-order:hover{\r\n    box-shadow: #909399 5px 5px 10px 4px;\r\n}\r\n.my-order-info{\r\n    margin-top: 5px;\r\n}\r\n.my-order-info>div:first-child{\r\n    float: left;\r\n}\r\n.my-order-info>div:last-child{\r\n    float: right;\r\n}\r\n.my-order-info>div:first-child span{\r\n    font-weight: bold;\r\n    color: #A9A0A0;\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n}\r\n.btn:hover{\r\n    color: #409EFF;\r\n    cursor:pointer;\r\n}\r\n.my-order-info>div:last-child span{\r\n    margin-right: 10px;\r\n    margin-left: 10px;\r\n}\r\n.my-order-description{\r\n    height: 90px;\r\n}\r\n.my-order-description>span{\r\n    line-height: 90px;\r\n}\r\n.my-order-description>span:first-child{\r\n    font-weight: bold;\r\n    color: #363434;\r\n    margin-left: 120px;\r\n    margin-right: 50px;\r\n    font-size: 40px;\r\n}\r\n.my-order-description>span:last-child{\r\n    font-weight: bold;\r\n    color: #363434;\r\n    margin-left: 50px;\r\n    font-size: 40px;\r\n}\r\n.page{\r\n    margin-top: 20px;\r\n    text-align: center;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=0764029c&scoped=true&\"\nimport script from \"./Order.vue?vue&type=script&lang=js&\"\nexport * from \"./Order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Order.vue?vue&type=style&index=0&id=0764029c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0764029c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","path","_v","model","value","callback","$$v","start","expression","end","on","search","_l","order","key","id","_s","time","status","$event","cancel","totalPages","currentPage","getPageNum","staticRenderFns","saveStart","saveEnd","orders","methods","goto","getDate","method","url","data","page","number","startTime","endTime","then","res","message","type","console","localStorage","getPage","params","component"],"sourceRoot":""}