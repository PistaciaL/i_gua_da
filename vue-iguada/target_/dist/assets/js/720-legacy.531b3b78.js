"use strict";(self["webpackChunkwork"]=self["webpackChunkwork"]||[]).push([[720],{8720:function(e,s,t){t.r(s),t.d(s,{default:function(){return o}});var a=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"back"},[a("div",{staticClass:"info"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("个人信息")]),a("el-breadcrumb-item",[e._v("修改信息")])],1)],1),a("div",{staticClass:"content clearfix"},[a("img",{attrs:{src:t(8055)}}),a("div",{staticClass:"line"}),a("div",{staticClass:"info-table"},[a("div",[a("span",[e._v("用户名      ")]),a("el-input",{attrs:{"prefix-icon":"el-icon-user",maxlength:"16"},model:{value:e.userName,callback:function(s){e.userName=s},expression:"userName"}})],1),a("div",[a("span",[e._v("学工号      ")]),a("el-input",{attrs:{"prefix-icon":"el-icon-s-promotion",maxlength:"16"},model:{value:e.userId,callback:function(s){e.userId=s},expression:"userId"}})],1),a("div",[a("span",[e._v("邮   箱      ")]),a("el-input",{attrs:{"prefix-icon":"el-icon-message",maxlength:"16"},model:{value:e.email,callback:function(s){e.email=s},expression:"email"}})],1),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.submit}},[e._v("提交修改")])],1)])])])},i=[],r=(t(4916),t(7601),{data:function(){return{userName:"",userId:"",email:""}},methods:{submit:function(){var e=this;""==this.userName||""==this.userId||""==this.email?this.$message({message:"输入不能为空!",type:"warning"}):0==this.checkEmail(this.email)?this.$message({message:"邮箱格式不正确!",type:"warning"}):this.$axios({method:"POST",url:"/user/resetInfo",data:{userName:this.userName,userId:this.userId,email:this.email}}).then((function(s){var t=s.data;1==t.status?(e.$message({message:"修改成功!",type:"success"}),e.userName=t.userName,e.userId=t.userId,e.email=t.email,e.$store.dispatch("setUserName",t.userName),e.$store.dispatch("setEmail",t.email),e.$store.dispatch("setUserId",t.userId)):0==t.status?e.$message({message:"修改失败!用户或邮箱已被他人使用!",type:"warning"}):(e.$store.state.status=1,e.$store.state.hasLogin=!1,e.$store.state.isManager=!1,e.$store.state.userName="",e.$store.state.email="",e.$store.state.userId="",localStorage.clear(),e.goto("/"))}))},checkEmail:function(e){return/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(e)},goto:function(e){this.$router.push({path:e})}},mounted:function(){this.userName=this.$store.state.userName,this.userId=this.$store.state.userId,this.email=this.$store.state.email}}),n=r,u=t(1001),l=(0,u.Z)(n,a,i,!1,null,"56c99c60",null),o=l.exports},8055:function(e,s,t){e.exports=t.p+"assets/img/user.c8abfaea.png"}}]);
//# sourceMappingURL=720-legacy.531b3b78.js.map