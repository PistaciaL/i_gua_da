{"version":3,"file":"assets/js/850.3a7f8c30.js","mappings":"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","sources":["webpack://work/./src/components/manager/UserManage.vue?b156","webpack://work/src/components/manager/UserManage.vue","webpack://work/./src/components/manager/UserManage.vue?13f2","webpack://work/./src/components/manager/UserManage.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"back\"},[_c('div',{staticClass:\"info\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")])],1)],1),_c('div',{staticClass:\"search\"},[_c('el-input',{staticClass:\"date\",attrs:{\"placeholder\":\"请输入用户名或id\",\"maxlength\":\"16\"},model:{value:(_vm.searchInfo),callback:function ($$v) {_vm.searchInfo=$$v},expression:\"searchInfo\"}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"size\":\"medium\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索用户\")])],1),_c('div',[_c('el-table',{attrs:{\"data\":_vm.users}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"用户id\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"userName\",\"label\":\"用户名\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"用户邮箱\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"用户状态\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"power\",\"label\":\"用户权限\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.power==='普通用户')?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.changePower(scope.row.id,true)}}},[_vm._v(\"设为管理员\")]):_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.changePower(scope.row.id,false)}}},[_vm._v(\"取消管理员\")]),(scope.row.status==='正常')?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.changeStatus(scope.row.id,true)}}},[_vm._v(\"封禁\")]):_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.changeStatus(scope.row.id,false)}}},[_vm._v(\"解封\")])]}}])})],1)],1),_c('div',{staticClass:\"page\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.totalPages,\"current-page\":_vm.currentPage},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"current-change\":_vm.getPageNum}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"back\">\r\n        <div class=\"info\">\r\n            <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n                <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n                <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"search\">\r\n            <el-input class=\"date\" v-model=\"searchInfo\" placeholder=\"请输入用户名或id\" maxlength=\"16\"></el-input>\r\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"medium\" @click=\"search\">搜索用户</el-button>\r\n        </div>\r\n        <div>\r\n            <el-table :data=\"users\">\r\n                <el-table-column prop=\"id\" label=\"用户id\" width=\"100\"></el-table-column>\r\n                <el-table-column prop=\"userName\" label=\"用户名\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"email\" label=\"用户邮箱\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"status\" label=\"用户状态\" width=\"100\"></el-table-column>\r\n                <el-table-column prop=\"power\" label=\"用户权限\" width=\"100\"></el-table-column>\r\n                <el-table-column label=\"操作\" width=\"180\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button v-if=\"scope.row.power==='普通用户'\" @click=\"changePower(scope.row.id,true)\" type=\"text\" size=\"small\">设为管理员</el-button>\r\n                        <el-button v-else @click=\"changePower(scope.row.id,false)\" type=\"text\" size=\"small\">取消管理员</el-button>\r\n                        <el-button v-if=\"scope.row.status==='正常'\" @click=\"changeStatus(scope.row.id,true)\" type=\"text\" size=\"small\">封禁</el-button>\r\n                        <el-button v-else @click=\"changeStatus(scope.row.id,false)\" type=\"text\" size=\"small\">解封</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </div>\r\n        <div  class=\"page\">\r\n            <el-pagination background layout=\"prev, pager, next\" :total=\"totalPages\" :current-page.sync=\"currentPage\" @current-change=\"getPageNum\">\r\n            </el-pagination>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            searchInfo:'',\r\n            saveInfo:'',\r\n            totalPages:100,\r\n            currentPage:1,\r\n            users:[\r\n            ],\r\n        }\r\n    },\r\n    methods:{\r\n        getDate(value){\r\n            if(value==='')return '';\r\n            let time = new Date(value);\r\n            return time.getFullYear()+'/'+(time.getMonth()+1)+'/'+time.getDate();\r\n        },\r\n        print(value){\r\n            console.log(value);\r\n        },\r\n        getPageNum(value){\r\n            this.getPage(this.currentPage);\r\n        },\r\n        changePower(id,choice){\r\n            this.$axios({\r\n                method:'POST',\r\n                url:'/manager/setPower',\r\n                data:{\r\n                    id:id,\r\n                    power:choice,\r\n                }\r\n            }).then(res=>{\r\n                let data = res.data;\r\n                if(data.status==1){\r\n                    this.$message({\r\n                        message:\"设置成功\",\r\n                        type:'success'\r\n                    });\r\n                    this.users.forEach(function(value,index,self){\r\n                        if(value.id===id){\r\n                            if(choice){\r\n                                self[index].power='管理员';\r\n                            }else{\r\n                                self[index].power='普通用户';\r\n                            }\r\n                        }\r\n                    })\r\n                }else if(data.status==0){\r\n                    this.$message({\r\n                        message:'不能对自己进行操作!',\r\n                        type:'warning'\r\n                    })\r\n                }else if(data.status==2){\r\n                    this.$store.state.status = 2;\r\n                    this.$store.dispatch(\"setIsManager\",false);\r\n                    this.goto(\"/user/userInfo\");\r\n                }else{\r\n                    this.$store.state.status = 1;\r\n                    this.$store.state.hasLogin = false;\r\n                    this.$store.state.isManager = false;\r\n                    this.$store.state.userName = '';\r\n                    this.$store.state.email = '';\r\n                    this.$store.state.userId = '';\r\n                    localStorage.clear();\r\n                    this.goto('/');\r\n                }\r\n            })\r\n        },\r\n        changeStatus(id,choice){\r\n            this.$axios({\r\n                method:'POST',\r\n                url:'/manager/setStatus',\r\n                data:{\r\n                    id:id,\r\n                    status:choice,\r\n                }\r\n            }).then(res=>{\r\n                let data = res.data;\r\n                if(data.status==1){\r\n                    this.$message({\r\n                        message:\"设置成功\",\r\n                        type:'success'\r\n                    });\r\n                    this.users.forEach(function(value,index,self){\r\n                        if(value.id===id){\r\n                            if(choice){\r\n                                self[index].status='封禁中';\r\n                            }else{\r\n                                self[index].status='正常';\r\n                            }\r\n                        }\r\n                    })\r\n                }else if(data.status==0){\r\n                    this.$message({\r\n                        message:'不能对自己进行操作!',\r\n                        type:'warning'\r\n                    })\r\n                }else if(data.status==2){\r\n                    this.$store.state.status = 2;\r\n                    this.$store.dispatch(\"setIsManager\",false);\r\n                    this.goto(\"/user/userInfo\");\r\n                }else{\r\n                    this.$store.state.status = 1;\r\n                    this.$store.state.hasLogin = false;\r\n                    this.$store.state.isManager = false;\r\n                    this.$store.state.userName = '';\r\n                    this.$store.state.email = '';\r\n                    this.$store.state.userId = '';\r\n                    localStorage.clear();\r\n                    this.goto('/');\r\n                }\r\n            })\r\n        },\r\n        search(){\r\n            this.saveInfo = this.searchInfo;\r\n            this.getPage(1);\r\n        },\r\n        getPage(currentPage){\r\n            this.$axios({\r\n                method:'GET',\r\n                url:'/manager/searchUsers',\r\n                params:{\r\n                    info:this.saveInfo,\r\n                    page:currentPage,\r\n                    number:8\r\n                }\r\n            }).then(res=>{\r\n                let data = res.data;\r\n                if(data.status==1){\r\n                    this.users = data.users;\r\n                    this.totalPages = data.pages*10;\r\n                    this.currentPage = data.currentPage;\r\n                }else if(data.status==0){\r\n                    this.$message.error('未知错误!');\r\n                }else if(data.status==2){\r\n                    this.$store.state.status = 2;\r\n                    this.$store.dispatch(\"setIsManager\",false);\r\n                    this.goto(\"/user/userInfo\");\r\n                }else{\r\n                    this.$store.state.status = 1;\r\n                    this.$store.state.hasLogin = false;\r\n                    this.$store.state.isManager = false;\r\n                    this.$store.state.userName = '';\r\n                    this.$store.state.email = '';\r\n                    this.$store.state.userId = '';\r\n                    localStorage.clear();\r\n                    this.goto('/');\r\n                }\r\n            })\r\n        }\r\n    },\r\n    mounted(){\r\n        this.getPage(this.currentPage);\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.back{\r\n    width: 100%;\r\n    margin:0 auto;\r\n    height: 680px;\r\n    position: relative;\r\n}\r\n.info{\r\n    margin-top:10px;\r\n    margin-bottom: 10px;\r\n    padding-left: 10px;\r\n}\r\n.search{\r\n    margin-top: 20px;\r\n    margin-bottom: 10px;\r\n}\r\n.search > .el-button{\r\n    margin-left: 20px;\r\n}\r\n.search > span{\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n}\r\n.date{\r\n    margin-left: 480px;\r\n    width: 200px !important;\r\n}\r\n.page{\r\n    width: 100%;\r\n    text-align: center;\r\n    position: absolute;\r\n    bottom: 0;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserManage.vue?vue&type=template&id=45d9faab&scoped=true&\"\nimport script from \"./UserManage.vue?vue&type=script&lang=js&\"\nexport * from \"./UserManage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserManage.vue?vue&type=style&index=0&id=45d9faab&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45d9faab\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","path","_v","model","value","callback","$$v","searchInfo","expression","on","search","users","scopedSlots","_u","key","fn","scope","row","power","$event","changePower","id","status","changeStatus","totalPages","currentPage","getPageNum","staticRenderFns","saveInfo","methods","getDate","print","console","method","url","data","then","res","message","type","self","localStorage","getPage","params","info","page","number","component"],"sourceRoot":""}