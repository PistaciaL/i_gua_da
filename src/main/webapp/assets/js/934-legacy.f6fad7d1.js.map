{"version":3,"file":"assets/js/934-legacy.f6fad7d1.js","mappings":"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","sources":["webpack://work/./src/components/user/BusTime.vue?a143","webpack://work/src/components/user/BusTime.vue","webpack://work/./src/components/user/BusTime.vue?b2fe","webpack://work/./src/components/user/BusTime.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"back\"},[_c('div',{staticClass:\"info\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"校车信息\")]),_c('el-breadcrumb-item',[_vm._v(\"校车班次\")])],1)],1),_c('div',{staticClass:\"search\"},[_c('el-date-picker',{staticClass:\"date\",attrs:{\"type\":\"date\",\"placeholder\":\"开始日期\"},model:{value:(_vm.start),callback:function ($$v) {_vm.start=$$v},expression:\"start\"}}),_c('span',[_vm._v(\"到\")]),_c('el-date-picker',{staticClass:\"date\",attrs:{\"type\":\"date\",\"placeholder\":\"结束日期\"},model:{value:(_vm.end),callback:function ($$v) {_vm.end=$$v},expression:\"end\"}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"size\":\"medium\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索班次\")])],1),_c('div',[_c('el-table',{attrs:{\"data\":_vm.times}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"班次编号\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"time\",\"label\":\"出发时间\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"start\",\"label\":\"出发车站\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"end\",\"label\":\"目的车站\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"number\",\"label\":\"剩余空位\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.hasOrdered==false)?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.order(scope.row.id)}}},[_vm._v(\"预约\")]):_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"}},[_vm._v(\"已预约\")])]}}])})],1)],1),_c('div',[_c('el-pagination',{staticClass:\"page\",attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.totalPages,\"current-page\":_vm.currentPage},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event},\"current-change\":_vm.getPageNum}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"back\">\r\n        <div class=\"info\">\r\n            <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n                <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n                <el-breadcrumb-item>校车信息</el-breadcrumb-item>\r\n                <el-breadcrumb-item>校车班次</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"search\">\r\n            <el-date-picker class=\"date\" v-model=\"start\" type=\"date\" placeholder=\"开始日期\"></el-date-picker>\r\n            <span>到</span>\r\n            <el-date-picker class=\"date\" v-model=\"end\" type=\"date\" placeholder=\"结束日期\"></el-date-picker>\r\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"medium\" @click=\"search\">搜索班次</el-button>\r\n        </div>\r\n        <div>\r\n            <el-table :data=\"times\">\r\n                <el-table-column prop=\"id\" label=\"班次编号\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"time\" label=\"出发时间\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"start\" label=\"出发车站\" width=\"100\"></el-table-column>\r\n                <el-table-column prop=\"end\" label=\"目的车站\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"number\" label=\"剩余空位\" width=\"100\"></el-table-column>\r\n                <el-table-column label=\"操作\" width=\"100\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button v-if=\"scope.row.hasOrdered==false\" @click=\"order(scope.row.id)\" type=\"text\" size=\"small\">预约</el-button>\r\n                        <el-button v-else type=\"text\" size=\"small\">已预约</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </div>\r\n        <div>\r\n            <el-pagination class=\"page\" background layout=\"prev, pager, next\" :total=\"totalPages\" :current-page.sync=\"currentPage\" @current-change=\"getPageNum\">\r\n            </el-pagination>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            start:'',\r\n            end:'',\r\n            saveStart:'',\r\n            saveEnd:'',\r\n            times:[\r\n            ],\r\n            totalPages:100,\r\n            currentPage:1,\r\n        }\r\n    },\r\n    methods:{\r\n        goto(path){\r\n            this.$router.push({\r\n                path:path\r\n            })\r\n        },\r\n        getDate(value){\r\n            if(value==='')return '';\r\n            let time = new Date(value);\r\n            return time.getFullYear()+'/'+(time.getMonth()+1)+'/'+time.getDate();\r\n        },\r\n        getPageNum(value){\r\n            this.getPage(this.currentPage);\r\n        },\r\n        search(){\r\n            this.saveStart = this.start;\r\n            this.saveEnd = this.end;\r\n            this.getPage(1);\r\n        },\r\n        order(id){\r\n            this.$axios({\r\n                method:'POST',\r\n                url:'/user/order',\r\n                data:{\r\n                    id:id,\r\n                }\r\n            }).then(res=>{\r\n                let data = res.data;\r\n                if(data.status==1){\r\n                    this.$message({\r\n                        message:\"预约成功,校车班次id为\"+id,\r\n                        type:'success'\r\n                    })\r\n                    this.times.forEach((value,index,self)=>{\r\n                        if(value.id==data.id){\r\n                            value.number=data.number;\r\n                            value.hasOrdered = data.hasOrdered;\r\n                        }\r\n                    })\r\n                }else if(data.status==0){\r\n                    this.$message({\r\n                        message:'预约失败,已无剩余座位!',\r\n                        type:'warning'\r\n                    })\r\n                }else if(data.status==2){\r\n                    this.$message({\r\n                        message:'预约失败,请勿重复预约!',\r\n                        type:'warning'\r\n                    })\r\n                }else{\r\n                    this.$store.state.status = 1;\r\n                    this.$store.state.hasLogin = false;\r\n                    this.$store.state.isManager = false;\r\n                    this.$store.state.userName = '';\r\n                    this.$store.state.email = '';\r\n                    this.$store.state.userId = '';\r\n                    localStorage.clear();\r\n                    this.goto('/');\r\n                }\r\n            })\r\n        },\r\n        getPage(currentPage){\r\n            this.$axios({\r\n                method:'GET',\r\n                url:'/user/searchTimes',\r\n                params:{\r\n                    page:currentPage,\r\n                    number:8,\r\n                    startTime:this.getDate(this.saveStart),\r\n                    endTime:this.getDate(this.saveEnd)\r\n                }\r\n            }).then(res=>{\r\n                let data = res.data;\r\n                if(data.status==1){\r\n                    this.times = data.times;\r\n                    this.totalPages = data.pages*10;\r\n                    this.currentPage = data.currentPage;\r\n                }else if(data.status==0){\r\n                    this.$message({\r\n                        message:'日期输入有误!',\r\n                        type:'warning'\r\n                    })\r\n                }else{\r\n                    this.$store.state.status = 1;\r\n                    this.$store.state.hasLogin = false;\r\n                    this.$store.state.isManager = false;\r\n                    this.$store.state.userName = '';\r\n                    this.$store.state.email = '';\r\n                    this.$store.state.userId = '';\r\n                    localStorage.clear();\r\n                    this.goto('/');\r\n                }\r\n            })\r\n        }\r\n    },\r\n    mounted(){\r\n        this.getPage(this.currentPage);\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.back{\r\n    width: 100%;\r\n    margin:0 auto;\r\n}\r\n.info{\r\n    margin-top:10px;\r\n    margin-bottom: 10px;\r\n    padding-left: 10px;\r\n}\r\n.search{\r\n    margin-top: 20px;\r\n    margin-bottom: 10px;\r\n}\r\n.search>.date:first-child{\r\n    margin-left: 170px;\r\n}\r\n.search > .el-button{\r\n    margin-left: 40px;\r\n}\r\n.search > span{\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n}\r\n.date{\r\n    width: 150px !important;\r\n}\r\n.page{\r\n    margin-top: 20px;\r\n    text-align: center;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BusTime.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BusTime.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BusTime.vue?vue&type=template&id=06f99795&scoped=true&\"\nimport script from \"./BusTime.vue?vue&type=script&lang=js&\"\nexport * from \"./BusTime.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BusTime.vue?vue&type=style&index=0&id=06f99795&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06f99795\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","path","_v","model","value","callback","$$v","start","expression","end","on","search","times","scopedSlots","_u","key","fn","scope","row","hasOrdered","$event","order","id","totalPages","currentPage","getPageNum","staticRenderFns","saveStart","saveEnd","methods","method","url","data","then","message","type","localStorage","params","page","number","startTime","endTime","component"],"sourceRoot":""}