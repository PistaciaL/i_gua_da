{"version":3,"file":"assets/js/720.29f4a42e.js","mappings":"oJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,gBAAgB,CAACG,MAAM,CAAC,kBAAkB,wBAAwB,CAACH,EAAG,qBAAqB,CAACG,MAAM,CAAC,GAAK,CAAEC,KAAM,OAAQ,CAACR,EAAIS,GAAG,QAAQL,EAAG,qBAAqB,CAACJ,EAAIS,GAAG,UAAUL,EAAG,qBAAqB,CAACJ,EAAIS,GAAG,WAAW,IAAI,GAAGL,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAM,EAAQ,SAAgCH,EAAG,MAAM,CAACE,YAAY,SAASF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIS,GAAG,eAAeL,EAAG,WAAW,CAACG,MAAM,CAAC,cAAc,eAAe,UAAY,MAAMG,MAAM,CAACC,MAAOX,EAAY,SAAEY,SAAS,SAAUC,GAAMb,EAAIc,SAASD,GAAKE,WAAW,eAAe,GAAGX,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIS,GAAG,eAAeL,EAAG,WAAW,CAACG,MAAM,CAAC,cAAc,sBAAsB,UAAY,MAAMG,MAAM,CAACC,MAAOX,EAAU,OAAEY,SAAS,SAAUC,GAAMb,EAAIgB,OAAOH,GAAKE,WAAW,aAAa,GAAGX,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIS,GAAG,iBAAiBL,EAAG,WAAW,CAACG,MAAM,CAAC,cAAc,kBAAkB,UAAY,MAAMG,MAAM,CAACC,MAAOX,EAAS,MAAEY,SAAS,SAAUC,GAAMb,EAAIiB,MAAMJ,GAAKE,WAAW,YAAY,GAAGX,EAAG,MAAM,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAU,KAAO,iBAAiBW,GAAG,CAAC,MAAQlB,EAAImB,SAAS,CAACnB,EAAIS,GAAG,WAAW,UAC9xCW,EAAkB,GCiCtB,GACE,OACE,MAAJ,CACM,SAANN,GACM,OAANE,GACM,MAANC,KAGE,QAAFI,CACI,SACJ,mDACQ,KAAR,UACU,QAAVC,UACU,KAAVC,YAEA,+BACQ,KAAR,UACU,QAAVD,WACU,KAAVC,YAGQ,KAAR,QACU,OAAVC,OACU,IAAVC,kBACU,KAAVC,CACY,SAAZZ,KAAAA,SACY,OAAZE,KAAAA,OACY,MAAZC,KAAAA,SAEAU,MAAAC,IACU,IAAV,SACA,aACY,KAAZ,UACc,QAAdN,QACc,KAAdC,YAEY,KAAZ,oBACY,KAAZ,gBACY,KAAZ,cACY,KAAZ,0CACY,KAAZ,oCACY,KAAZ,uCACA,YACY,KAAZ,UACc,QAAdD,oBACc,KAAdC,aAGY,KAAZ,sBACY,KAAZ,yBACY,KAAZ,0BACY,KAAZ,yBACY,KAAZ,sBACY,KAAZ,uBACY,aAAZM,QACY,KAAZ,eAKI,WAAJC,GACM,MAAN,8EAEI,KAAJC,GACM,KAAN,cACQ,KAARvB,MAIE,UACE,KAAJ,oCACI,KAAJ,gCACI,KAAJ,gCC1G6Q,I,UCQzQwB,GAAY,OACd,EACAjC,EACAqB,GACA,EACA,KACA,WACA,MAIF,EAAeY,EAAiB,S","sources":["webpack://work/./src/components/user/UserInfo.vue?f0f1","webpack://work/src/components/user/UserInfo.vue","webpack://work/./src/components/user/UserInfo.vue?e475","webpack://work/./src/components/user/UserInfo.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"back\"},[_c('div',{staticClass:\"info\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"个人信息\")]),_c('el-breadcrumb-item',[_vm._v(\"修改信息\")])],1)],1),_c('div',{staticClass:\"content clearfix\"},[_c('img',{attrs:{\"src\":require('../../assets/img/user.png')}}),_c('div',{staticClass:\"line\"}),_c('div',{staticClass:\"info-table\"},[_c('div',[_c('span',[_vm._v(\"用户名      \")]),_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-user\",\"maxlength\":\"16\"},model:{value:(_vm.userName),callback:function ($$v) {_vm.userName=$$v},expression:\"userName\"}})],1),_c('div',[_c('span',[_vm._v(\"学工号      \")]),_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-s-promotion\",\"maxlength\":\"16\"},model:{value:(_vm.userId),callback:function ($$v) {_vm.userId=$$v},expression:\"userId\"}})],1),_c('div',[_c('span',[_vm._v(\"邮   箱      \")]),_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-message\",\"maxlength\":\"16\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}})],1),_c('div',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-check\"},on:{\"click\":_vm.submit}},[_vm._v(\"提交修改\")])],1)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"back\">\r\n        <div class=\"info\">\r\n            <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n                <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n                <el-breadcrumb-item>个人信息</el-breadcrumb-item>\r\n                <el-breadcrumb-item>修改信息</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"content clearfix\">\r\n            <img :src=\"require('../../assets/img/user.png')\"/>\r\n            <div class=\"line\"></div>\r\n            <div class=\"info-table\">\r\n                <div>\r\n                    <span>用户名&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                    <el-input prefix-icon=\"el-icon-user\" v-model=\"userName\" maxlength=\"16\"></el-input>\r\n                </div>\r\n                <div>\r\n                    <span>学工号&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                    <el-input prefix-icon=\"el-icon-s-promotion\" v-model=\"userId\" maxlength=\"16\"></el-input>\r\n                </div>\r\n                <div>\r\n                    <span>邮&nbsp;&nbsp;&nbsp;箱&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n                    <el-input prefix-icon=\"el-icon-message\" v-model=\"email\" maxlength=\"16\"></el-input>\r\n                </div>\r\n                <div>\r\n                    <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"submit\">提交修改</el-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            userName:'',\r\n            userId:'',\r\n            email:'',\r\n        }\r\n    },\r\n    methods:{\r\n        submit(){\r\n            if(this.userName==''||this.userId==''||this.email==''){\r\n                this.$message({\r\n                    message:'输入不能为空!',\r\n                    type:'warning'\r\n                })\r\n            }else if(this.checkEmail(this.email)==false){\r\n                this.$message({\r\n                    message:'邮箱格式不正确!',\r\n                    type:'warning'\r\n                })\r\n            }else{\r\n                this.$axios({\r\n                    method:'POST',\r\n                    url:'/user/resetInfo',\r\n                    data:{\r\n                        userName:this.userName,\r\n                        userId:this.userId,\r\n                        email:this.email,\r\n                    }\r\n                }).then(res=>{\r\n                    let data = res.data;\r\n                    if(data.status==1){\r\n                        this.$message({\r\n                            message:'修改成功!',\r\n                            type: 'success'\r\n                        });\r\n                        this.userName = data.userName;\r\n                        this.userId = data.userId;\r\n                        this.email = data.email;\r\n                        this.$store.dispatch(\"setUserName\",data.userName);\r\n                        this.$store.dispatch(\"setEmail\",data.email);\r\n                        this.$store.dispatch(\"setUserId\",data.userId);\r\n                    }else if(data.status==0){\r\n                        this.$message({\r\n                            message:'修改失败!用户或邮箱已被他人使用!',\r\n                            type:'warning'\r\n                        });\r\n                    }else{\r\n                        this.$store.state.status = 1;\r\n                        this.$store.state.hasLogin = false;\r\n                        this.$store.state.isManager = false;\r\n                        this.$store.state.userName = '';\r\n                        this.$store.state.email = '';\r\n                        this.$store.state.userId = '';\r\n                        localStorage.clear();\r\n                        this.goto('/');\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        checkEmail(value) {\r\n            return /^[A-Za-z\\d]+([-_.][A-Za-z\\d]+)*@([A-Za-z\\d]+[-.])+[A-Za-z\\d]{2,4}$/.test(value);\r\n        },\r\n        goto(path){\r\n            this.$router.push({\r\n                path:path\r\n            })\r\n        },\r\n    },\r\n    mounted(){\r\n        this.userName = this.$store.state.userName;\r\n        this.userId = this.$store.state.userId;\r\n        this.email = this.$store.state.email;\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.back{\r\n    width: 100%;\r\n    margin:0 auto;\r\n}\r\n.info{\r\n    margin-top:10px;\r\n    margin-bottom: 10px;\r\n    padding-left: 10px;\r\n}\r\n.el-breadcrumb{\r\n    background-color: #F7F8FA;\r\n}\r\nimg{\r\n    width: 150px;\r\n    height: 150px;\r\n    border-radius: 50%;\r\n    margin-top: 30px;\r\n    margin-left: 30px;\r\n    float: left;\r\n}\r\n.content > div{\r\n    float: left;\r\n}\r\n.info-table{\r\n    width:600px;\r\n}\r\n.info-table > div{\r\n    margin-top: 10px;\r\n}\r\n.el-input{\r\n    width: 400px;\r\n}\r\n.el-button{\r\n    margin-left: 36%;\r\n}\r\n.line{\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n    margin-top: 10px;\r\n    height: 190px;\r\n    width: 1px;\r\n    background-color: #E6E6E6;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserInfo.vue?vue&type=template&id=56c99c60&scoped=true&\"\nimport script from \"./UserInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./UserInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserInfo.vue?vue&type=style&index=0&id=56c99c60&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56c99c60\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","path","_v","model","value","callback","$$v","userName","expression","userId","email","on","submit","staticRenderFns","methods","message","type","method","url","data","then","res","localStorage","checkEmail","goto","component"],"sourceRoot":""}