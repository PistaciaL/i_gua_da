"use strict";(self["webpackChunkwork"]=self["webpackChunkwork"]||[]).push([[721],{721:function(s,t,e){e.r(t),e.d(t,{default:function(){return u}});var a=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"back"},[a("div",{staticClass:"nav"},[a("img",{attrs:{src:e(5080)}}),0==s.$store.state.hasLogin?a("div",[a("span",{staticClass:"click",on:{click:function(t){s.showLogin=!0,s.showRegister=!1}}},[s._v("登录")]),a("span",[s._v("  或  ")]),a("span",{staticClass:"click",on:{click:function(t){s.showRegister=!0,s.showLogin=!1}}},[s._v("注册")])]):a("div",[a("span",[s._v("欢迎您!"+s._s(s.userName))]),a("span",{staticClass:"click",on:{click:function(t){return s.logout()}}},[s._v("  退出登录")])])]),a("div",{staticClass:"content"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"menu-child"},[a("i",{staticClass:"el-icon-user-solid"}),a("h2",[s._v("个人主页")]),a("p",[s._v("包含个人信息，预约信息等信息，提供预约校车，留言反馈，查看校车班次等服务")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return s.goto("/user/userInfo")}}},[s._v("点击进入")])],1),a("div",{staticClass:"menu-child"},[a("i",{staticClass:"el-icon-s-promotion"}),a("h2",[s._v("预约校车")]),a("p",[s._v("可进行查询当前可预约校车，校车剩余座位，预约校车等操作")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return s.goto("/user/busTime")}}},[s._v("点击进入")])],1),a("div",{staticClass:"menu-child"},[a("i",{staticClass:"el-icon-message-solid"}),a("h2",[s._v("留言反馈")]),a("p",[s._v("留下您宝贵的意见，您的建议是我们不断前进的最大动力！")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return s.goto("/user/message")}}},[s._v("点击进入")])],1),a("div",{staticClass:"menu-child"},[a("i",{staticClass:"el-icon-s-platform"}),a("h2",[s._v("管理系统")]),a("p",[s._v("具有管理员权限的用户可以进入后台对用户，校车班次表等进行管理")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return s.goto("/manager/busManage")}}},[s._v("点击进入")])],1)])]),a("div",{staticClass:"info clearfix"},[a("div",{staticClass:"time"},[a("h2",[s._v("今日校车排班")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:s.timeLoading,expression:"timeLoading"}],attrs:{data:s.times,"row-class-name":s.tableRowClassName,"max-height":"300","header-cell-style":{background:"#F1F7FF"}}},[a("el-table-column",{attrs:{prop:"time",label:"出发时间",width:"180"}}),a("el-table-column",{attrs:{prop:"start",label:"出发车站",width:"100"}}),a("el-table-column",{attrs:{prop:"end",label:"目的车站",width:"100"}}),a("el-table-column",{attrs:{prop:"number",label:"剩余空位",width:"100"}})],1)],1),a("div",{staticClass:"notice"},[a("h2",[s._v("公告通知")]),a("el-carousel",{directives:[{name:"loading",rawName:"v-loading",value:s.noticeLoading,expression:"noticeLoading"}],attrs:{"indicator-position":"outside",height:"270px"}},s._l(s.notices,(function(t){return a("el-carousel-item",{key:t.id},[a("h3",{staticClass:"notice-title"},[s._v(s._s(t.title))]),a("p",{staticClass:"notice-content"},[s._v("    "+s._s(t.content))])])})),1)],1)]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"bottom-logo"},[a("img",{staticClass:"logo2",attrs:{src:e(1823)}})]),a("div",{staticClass:"line"}),s._m(0),a("div",{staticClass:"bottom-logo2"},[a("img",{staticClass:"logo3",attrs:{src:e(237)}})])]),a("el-dialog",{attrs:{visible:s.showLogin,width:"30%",center:"","close-on-click-modal":!1,"before-close":s.beforeClose,"lock-scroll":!1},on:{"update:visible":function(t){s.showLogin=t}}},[a("div",{staticClass:"login"},[a("h2",[s._v("登录账号")]),a("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入用户名",maxlength:"16"},model:{value:s.userName,callback:function(t){s.userName=t},expression:"userName"}}),a("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"请输入密码","show-password":"",maxlength:"16"},model:{value:s.password,callback:function(t){s.password=t},expression:"password"}}),a("p",{staticClass:"forget click",on:{click:function(t){return s.goto("/reset")}}},[s._v("忘记密码？")]),a("p",[s._v(s._s(s.loginError))]),a("el-button",{attrs:{type:"primary"},on:{click:s.login}},[s._v("登录")]),a("el-button",{on:{click:function(t){s.showRegister=!0,s.showLogin=!1,s.clearData()}}},[s._v("注册账号")]),a("span",[s._v("登录注册即代表同意i瓜大《用户协议》和《隐私协议》")])],1)]),a("el-dialog",{attrs:{visible:s.showRegister,width:"30%",center:"","close-on-click-modal":!1,"before-close":s.beforeClose,"lock-scroll":!1},on:{"update:visible":function(t){s.showRegister=t}}},[a("div",{staticClass:"register"},[a("h2",[s._v("注册账号")]),a("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入用户名",maxlength:"16"},model:{value:s.userName,callback:function(t){s.userName=t},expression:"userName"}}),a("el-input",{attrs:{"prefix-icon":"el-icon-s-promotion",placeholder:"请输入学工号",maxlength:"16"},model:{value:s.userId,callback:function(t){s.userId=t},expression:"userId"}}),a("el-input",{attrs:{"prefix-icon":"el-icon-message",placeholder:"请输入邮箱",maxlength:"16"},model:{value:s.email,callback:function(t){s.email=t},expression:"email"}}),a("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"请输入密码","show-password":"",maxlength:"16"},model:{value:s.registerPassword,callback:function(t){s.registerPassword=t},expression:"registerPassword"}}),a("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"请再次输入密码","show-password":"",maxlength:"16"},model:{value:s.passwordAgain,callback:function(t){s.passwordAgain=t},expression:"passwordAgain"}}),a("p",[s._v(s._s(s.registerError))]),a("el-button",{attrs:{type:"warning"},on:{click:s.register}},[s._v("注册")]),a("el-button",{on:{click:function(t){s.showLogin=!0,s.showRegister=!1,s.clearData()}}},[s._v("已有账号")]),a("span",[s._v("登录注册即代表同意i瓜大《用户协议》和《隐私协议》")])],1)])],1)},i=[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"bottom-info"},[e("p",[s._v("i瓜大开发团队,联系电话:18322805616")]),e("p",[s._v("团队成员:刘智宇,康弘,卜欣阳,董保朔,冶小东")]),e("p",[s._v("地址:西北工业大学长安校区")]),e("p",[s._v("版权所有 © i瓜大开发团队")])])}],r=(e(4916),e(7601),e(1539),e(4747),e(4102)),o={data:function(){return{userName:"",password:"",registerPassword:"",passwordAgain:"",email:"",userId:"",showLogin:!1,showRegister:!1,loginError:"",registerError:"",timeLoading:!0,noticeLoading:!0,encryptor:null,notices:[],times:[]}},methods:{getDate:function(s){if(""===s)return"";var t=new Date(s);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()},goto:function(s){var t=!0;0==s.indexOf("/user")?0==this.$store.state.hasLogin&&(this.showLogin=!0,t=!1):0==s.indexOf("/manager")&&0==this.$store.state.isManager&&(this.$message.error("您无管理员权限!"),t=!1),t&&this.$router.push({path:s})},tableRowClassName:function(s){s.row,s.rowIndex;return"row"},logout:function(){var s=this;this.$axios({method:"POST",url:"/logout"}).then((function(t){var e=t.data;console.log(e),1===e.status&&(s.userName="",s.$store.state.hasLogin=!1,s.$store.state.isManager=!1,s.$store.state.userName="",s.$store.state.email="",s.$store.state.userId="",localStorage.clear(),s.clearData())}))},login:function(){var s=this;""==this.userName||""==this.password?this.loginError="输入为空!":this.$axios({method:"POST",url:"/login",params:{userName:this.userName,password:this.password}}).then((function(t){var e=t.data;"1"==e.status?(s.userName=e.userName,s.$store.dispatch("setUserName",e.userName),s.$store.dispatch("setHasLogin",!0),"1"==e.isManager?s.$store.dispatch("setIsManager",!1):s.$store.dispatch("setIsManager",!0),s.$store.dispatch("setEmail",e.email),s.$store.dispatch("setUserId",e.userId),s.clearData(),s.showLogin=!1):"0"==e.status?s.loginError="登录失败,用户名或密码错误":s.loginError="您的已账户被封禁，禁止登录"}))},register:function(){var s=this;""==this.userName||""==this.userId||""==this.email||""==this.registerPassword||""==this.passwordAgain?this.registerError="输入不能为空!":0==this.checkEmail(this.email)?this.registerError="邮箱格式不正确!":this.registerPassword!=this.passwordAgain?this.registerError="两次输入的密码不一致":this.$axios({method:"POST",url:"/register",params:{userName:this.userName,password:this.registerPassword,email:this.email,userId:this.userId}}).then((function(t){var e=t.data;0==e.status?s.registerError="注册失败,该账户已被注册":(s.userName=e.userName,s.$store.dispatch("setUserName",e.userName),s.$store.dispatch("setHasLogin",!0),s.$store.dispatch("setIsManager",e.isManager),s.$store.dispatch("setEmail",e.email),s.$store.dispatch("setUserId",e.userId),s.clearData(),s.showRegister=!1)}))},beforeClose:function(s){this.userName="",this.clearData(),s()},clearData:function(){this.registerError="",this.loginError="",this.password="",this.registerPassword="",this.passwordAgain="",this.email="",this.userId=""},checkEmail:function(s){return/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(s)}},mounted:function(){var s=this;this.userName=this.$store.state.userName,this.$axios({method:"GET",url:"/getTodayTimes"}).then((function(t){var e=t.data;e.forEach((function(t,e,a){t.time=s.getDate(t.time)})),s.times=e,s.timeLoading=!1})),this.$axios({method:"GET",url:"/getNoitces"}).then((function(t){var e=t.data;s.notices=e,s.noticeLoading=!1})),1==this.$store.state.status?(this.$message.error("您的session已经失效,请重新登录!"),this.$store.state.status=0):5==this.$store.state.status&&(this.$message({message:"修改成功!",type:"success"}),this.$store.state.status=0),this.encryptor=new r.X,this.encryptor.setPublicKey(this.$store.state.publicKey)}},n=o,l=e(1001),c=(0,l.Z)(n,a,i,!1,null,"37407c47",null),u=c.exports}}]);
//# sourceMappingURL=721-legacy.dc4acf0c.js.map