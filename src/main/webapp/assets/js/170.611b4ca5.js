"use strict";(self["webpackChunkwork"]=self["webpackChunkwork"]||[]).push([[170],{5170:function(s,t,e){e.r(t),e.d(t,{default:function(){return h}});var a=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"back"},[a("div",{staticClass:"nav"},[a("img",{attrs:{src:e(5080)}}),a("div",{on:{click:function(t){return s.goto("/")}}},[a("span",[s._v("返回首页")])])]),a("div",{staticClass:"content"},[a("div",{staticClass:"content-form"},[a("el-input",{attrs:{"prefix-icon":"el-icon-message",placeholder:"请输入邮箱",maxlength:"16"},model:{value:s.email,callback:function(t){s.email=t},expression:"email"}}),a("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"请输入密码","show-password":"",maxlength:"16"},model:{value:s.password,callback:function(t){s.password=t},expression:"password"}}),a("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"请再次输入密码","show-password":"",maxlength:"16"},model:{value:s.passwordAgain,callback:function(t){s.passwordAgain=t},expression:"passwordAgain"}}),a("el-input",{attrs:{"prefix-icon":"el-icon-edit",placeholder:"请输入验证码",maxlength:"16"},model:{value:s.checkStr,callback:function(t){s.checkStr=t},expression:"checkStr"}}),a("el-button",{attrs:{type:"primary"},on:{click:s.sendEmail}},[s._v("获取验证码")]),a("p",{staticClass:"info"}),a("el-button",{staticClass:"btn",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:s.submit}},[s._v("提交修改")]),a("p"),a("el-button",{staticClass:"btn",attrs:{icon:"el-icon-refresh-right"},on:{click:function(t){return s.goto("/")}}},[s._v("返回首页")])],1)]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"bottom-logo"},[a("img",{staticClass:"logo2",attrs:{src:e(1823)}})]),a("div",{staticClass:"line"}),s._m(0),a("div",{staticClass:"bottom-logo2"},[a("img",{staticClass:"logo3",attrs:{src:e(237)}})])])])},i=[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"bottom-info"},[e("p",[s._v("i瓜大开发团队,联系电话:18322805616")]),e("p",[s._v("团队成员:刘智宇,康弘,卜欣阳,董保朔,冶小东")]),e("p",[s._v("地址:西北工业大学长安校区")]),e("p",[s._v("版权所有 © i瓜大开发团队")])])}],l=e(4102);let o=new l.X;var r={data(){return{email:"",password:"",passwordAgain:"",checkStr:"",saveEmail:"",lastTime:null,period:20}},methods:{goto(s){this.$router.push({path:s})},logout(){this.goto("/index")},sendEmail(){if(""==this.email)this.$message({message:"邮箱不能为空!",type:"warning"});else if(0==this.checkEmail(this.email))this.$message({message:"邮箱格式不正确!",type:"warning"});else{let s=!1;if(null!=this.lastTime){let t=new Date,e=t.getTime()-this.lastTime.getTime();e<1e3*this.period?this.$message({message:"请勿频繁获取验证码,请"+parseInt(this.period-e/1e3)+"秒后重试!",type:"warning"}):s=!0}else s=!0;s&&(this.saveEmail=this.email,this.$axios({method:"POST",url:"/sendEmail",data:{email:this.email}}).then((s=>{let t=s.data;1==t.status?(this.$message({message:"邮件已发送",type:"success"}),this.saveEmail=this.email):(this.lastTime=new Date((new Date).getTime()-1e3*this.period),this.$message.error("该邮箱不存在!"),this.saveEmail="")})),this.lastTime=new Date)}},submit(){""==this.password||""==this.passwordAgain||""==this.checkStr?this.$message({message:"输入不能为空!",type:"warning"}):this.password!=this.passwordAgain?this.$message.error("两次输入密码不一致!"):""==this.saveEmail?this.$message({message:"请先获取验证码!",type:"warning"}):(o.setPublicKey(this.$store.state.publicKey),this.$axios({method:"POST",url:"/validate",data:{email:this.saveEmail,password:this.password,checkStr:this.checkStr}}).then((s=>{let t=s.data;1==t.status?(this.$message({message:"修改成功!",type:"success"}),this.saveEmail=""):0==t.status?this.$message.error("验证码错误!"):2==t.status?this.$message.error("验证码已经失效!"):this.$message.error("修改失败,您的账户已被封禁!")})))},checkEmail(s){return/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(s)}}},n=r,c=e(1001),m=(0,c.Z)(n,a,i,!1,null,"017f9cfe",null),h=m.exports}}]);
//# sourceMappingURL=170.611b4ca5.js.map